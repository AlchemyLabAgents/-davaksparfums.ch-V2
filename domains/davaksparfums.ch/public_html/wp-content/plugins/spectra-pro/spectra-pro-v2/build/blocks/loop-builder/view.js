import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const i=(l={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withSyncEvent:()=>e.withSyncEvent},c={},n.d(c,l),c),o=e=>e&&e instanceof window.HTMLAnchorElement&&e.href&&(!e.target||"_self"===e.target)&&e.origin===window.location.origin;var l,c;let s=null,a=null;const f=(e=500,t="search")=>"filter"===t?(a?.(),new Promise(((t,r)=>{const n=setTimeout(t,e);a=()=>{clearTimeout(n),r()}}))):(s?.(),new Promise(((t,r)=>{const n=setTimeout(t,e);s=()=>{clearTimeout(n),r()}}))),u=(e,t,r)=>{r?e.searchParams.set(t,r):e.searchParams.delete(t)};function*h(e,t,r=[]){t.loading=!0,r.forEach((e=>t[e]=!0));const{actions:i}=yield Promise.resolve().then(n.bind(n,438));yield i.navigate(e.href),t.loading=!1,r.forEach((e=>t[e]=!1)),setTimeout((()=>{document.querySelectorAll(".wp-block-spectra-pro-loop-builder").forEach((e=>{const t=e.querySelectorAll("[data-aos]");t.length>0&&(t.forEach((e=>{e.style.visibility="hidden",e.classList.remove("aos-init","aos-animate")})),setTimeout((()=>{t.forEach((e=>{e.style.visibility="visible"})),void 0!==window.AOS&&window.AOS.init()}),100))}))}),200)}const d=(e,t)=>{e.page=1,t.searchParams.delete(`${e.urlPrefix}-page`)};(0,i.store)("spectra-pro/loop-builder",{actions:{navigate:(0,i.withSyncEvent)((function*(e){const t=(0,i.getContext)(),{ref:r}=(0,i.getElement)(),l=r.closest(".wp-block-spectra-pro-loop-builder[data-wp-router-region]");if(o(r)&&!(0!==(c=e).button||c.metaKey||c.ctrlKey||c.altKey||c.shiftKey||c.defaultPrevented))if(e.preventDefault(),r.closest(".wp-block-spectra-pro-loop-builder-child-filter-button")){const e=new URL(r.href),n=e.searchParams.get(`${t.urlPrefix}-filter`);t.filter=n||"",d(t,e),yield*h(e,t,["filtering"])}else{const{actions:e}=yield Promise.resolve().then(n.bind(n,438));yield e.navigate(r.href),t.url=r.href;const i=".wp-block-spectra-pro-loop-builder-child-template a[href]";l.querySelector(i)?.focus()}var c})),*prefetch(){const{ref:e}=(0,i.getElement)();if(o(e)){const{actions:t}=yield Promise.resolve().then(n.bind(n,438));yield t.prefetch(e.href)}},onSearchInput:(0,i.withSyncEvent)((function*(e){e.preventDefault();const{value:t}=e.currentTarget,r=(0,i.getContext)();if(t===r.search)return;r.search=t,r.searching=!0;try{yield f(500)}catch{return}const n=new URL(window.location.href);d(r,n),u(n,`${r.urlPrefix}-search`,t),yield*h(n,r,["searching"])})),clearSearch:(0,i.withSyncEvent)((function*(e){if("keydown"===e?.type&&!["Enter","Space"].includes(e.key))return!0;e.preventDefault();const t=(0,i.getContext)();t.search="";const r=new URL(window.location.href);r.searchParams.delete(`${t.urlPrefix}-page`),r.searchParams.delete(`${t.urlPrefix}-search`),yield*h(r,t,["searching"])})),onSortInput:(0,i.withSyncEvent)((function*(e){e.preventDefault();const{value:t}=e.currentTarget,r=(0,i.getContext)();if(t===r.sort)return;r.sort=t,r.sorting=!0;try{yield f(500)}catch{return}const n=new URL(window.location.href);d(r,n),u(n,`${r.urlPrefix}-sort`,t),yield*h(n,r,["sorting"])})),onFilterInput:(0,i.withSyncEvent)((function*(e){e.preventDefault();const{value:t}=e.currentTarget,r=(0,i.getContext)();if(t===r.filter)return;r.filter=t,r.filtering=!0;try{yield f(500)}catch{return}const n=new URL(window.location.href);d(r,n),u(n,`${r.urlPrefix}-filter`,t),yield*h(n,r,["filtering"])})),onFiltersInput:(0,i.withSyncEvent)((function*(e){const{value:t,checked:r}=e.currentTarget,n=(0,i.getContext)(),[o="",l=""]=t.split("|"),c=`${n.urlPrefix}-filter`;n.pendingFilters||(n.pendingFilters=new Map),n.pendingFilters.set(l,r);try{yield f(200,"filter")}catch{return}const s=new URL(window.location.href);let a=[];const u=s.searchParams.get(c);if(u){const[e,t]=u.split("|");e===o&&t&&(a=t.split(","))}if(n.pendingFilters.forEach(((e,t)=>{e&&!a.includes(t)?a.push(t):e||(a=a.filter((e=>e!==t)))})),n.filters=a,n.pendingFilters.clear(),s.searchParams.delete(c),n.filters.length){const e=`${o}|${n.filters.join(",")}`;s.searchParams.set(c,e)}d(n,s),n.filtering=!0,yield*h(s,n,["filtering"])})),clearFilters:(0,i.withSyncEvent)((function*(e){e.preventDefault();const t=(0,i.getContext)();t.search="",t.filter="",t.sort="",t.filters=[],t.page=1;const r=new URL(window.location.href);r.searchParams.delete(`${t.urlPrefix}-page`),r.searchParams.delete(`${t.urlPrefix}-search`),r.searchParams.delete(`${t.urlPrefix}-filter`),r.searchParams.delete(`${t.urlPrefix}-sort`),yield*h(r,t,[]),document.querySelectorAll('.wp-block-spectra-pro-loop-builder-child-filter-checkbox input[name="spectra-term-filter[]"]').forEach((e=>{e.checked=!1}))}))},callbacks:{*prefetch(){const{url:e}=(0,i.getContext)(),{ref:t}=(0,i.getElement)();if(e&&o(t)){const{actions:e}=yield Promise.resolve().then(n.bind(n,438));yield e.prefetch(t.href)}},initFiltersInput(){const e=(0,i.getContext)(),{ref:t}=(0,i.getElement)(),{value:r}=t;t.checked=e.filters.includes(r)}}},{lock:!0});